{"version":3,"sources":["components/persons.js","components/app.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","value","onChange","console","log","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","type","DeleteButton","handleDeleteClick","onClick","Information","persons","map","person","name","number","App","useState","setPersons","setNewName","setNewNumber","search","setSearch","notificationMessage","setNotificationMessage","errorMessage","setErrorMessage","useEffect","personService","filteredPersons","filter","toLowerCase","includes","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","SuccessNotification","ErrorNotification","event","target","preventDefault","some","personToUpdate","window","confirm","updatedPersonObj","returnedPerson","setTimeout","catch","error","status","newPersonObj","concat","personName","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7d78e100.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = 'http://localhost:3001/api/persons'\r\n\r\nconst getAll = () =>  {\r\n  return axios.get(baseUrl).then(response => response.data)\r\n}\r\n\r\nconst create = (newObject) => {\r\n  return axios.post(baseUrl, newObject).then(response => response.data)\r\n}\r\n\r\nconst update = (newObject, id) => {\r\n  return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\r\n}\r\n\r\nconst remove = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`).then(response => response)\r\n}\r\n\r\nexport default {getAll, create, update, remove}","import React, { useState, useEffect } from 'react'\r\nimport personService  from './persons.js'\r\n\r\n\r\n\r\nconst Filter = ({value, onChange}) => {\r\n  return(\r\n    <form>\r\n      <div>\r\n        Filter shown with: <input value = {value} onChange = {onChange}/>\r\n        {console.log()}\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\n\r\n\r\nconst PersonForm  = ({addPerson,newName,handleNameChange,newNumber,handleNumberChange}) => {\r\n   \r\n  return(\r\n    <form onSubmit={addPerson}>\r\n      <div>\r\n        name: <input value = {newName} onChange = {handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value = {newNumber} onChange = {handleNumberChange}/>\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst DeleteButton = ({handleDeleteClick,id}) => {\r\n  return(\r\n    <button onClick = {() => handleDeleteClick(id)}>Delete</button>\r\n  )\r\n}\r\n\r\nconst Information = ({persons, handleDeleteClick}) => {\r\n  return(\r\n    <div>\r\n      {persons.map( person => {\r\n        return(\r\n          <p key = {person.name}>{person.name} {person.number} \r\n          <DeleteButton id = {person.id} handleDeleteClick = {handleDeleteClick}/></p>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons ] = useState([])\r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ search, setSearch ] = useState('')\r\n  const [ notificationMessage, setNotificationMessage] = useState('')\r\n  const [ errorMessage, setErrorMessage] = useState('')\r\n\r\n  useEffect(()=> {\r\n    personService\r\n      .getAll()\r\n      .then(response => setPersons(response))\r\n  }, [])\r\n\r\n  const filteredPersons = !search ? persons : persons.filter(person => person.name.toLowerCase().includes(search.toLowerCase()))\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault()\r\n\r\n    if(persons.some(person => person.name === newName)){\r\n      const personToUpdate = persons.filter(person => person.name === newName)[0]\r\n      if(window.confirm(`${newName} already exists in the phonebook, do you want to replace the old number with a new`)){\r\n        const updatedPersonObj = {\r\n          ...personToUpdate,\r\n          number: newNumber\r\n        }\r\n        personService\r\n          .update(updatedPersonObj, personToUpdate.id)\r\n          .then(returnedPerson => {\r\n            setPersons(persons.map(person => person.id !== personToUpdate.id ? person : returnedPerson))\r\n            setNewName('')\r\n            setNewNumber('')\r\n            setNotificationMessage(`Updated ${personToUpdate.name}`)\r\n            setTimeout(() => {\r\n              setNotificationMessage('')\r\n            }, 5000)\r\n          })\r\n          .catch((error) => {\r\n            if(error.response.status === 400){\r\n              setErrorMessage(error.response.data.error)\r\n              setTimeout(() => {\r\n                setErrorMessage('')\r\n              }, 5000)\r\n            } else{\r\n              setErrorMessage(`${personToUpdate.name} has already been removed from the server`)\r\n              setTimeout(() => {\r\n                setErrorMessage('')\r\n              }, 5000)\r\n              setPersons(persons.filter(person => person.id !== personToUpdate.id))\r\n            }})\r\n      }\r\n      return;\r\n    }\r\n    const newPersonObj = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n    personService\r\n      .create(newPersonObj)\r\n      .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setNotificationMessage(`Added ${newPersonObj.name}`)\r\n        setTimeout(() => {\r\n          setNotificationMessage('')\r\n        }, 5000)\r\n      })\r\n      .catch(error => { console.log(error.response.data) \r\n        setErrorMessage(error.response.data.error)\r\n        setTimeout(() => {\r\n          setErrorMessage('')\r\n        }, 5000) \r\n      })\r\n  }\r\n\r\n  const handleDeleteClick = (id) =>  {\r\n    const personName = persons.filter(person => person.id === id)[0].name\r\n    if(window.confirm(`Do you want to delete ${personName}`))\r\n    {\r\n      personService\r\n        .remove(id)\r\n        .then(() =>{\r\n          setPersons(persons.filter(person => person.id !== id))})\r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearch(event.target.value)\r\n  }\r\n\r\n  const Notification = ({message, color}) => {\r\n\r\n    const style = {\r\n      color: color,\r\n      background: 'lightgrey',\r\n      fontSize: 20,\r\n      borderStyle: 'solid',\r\n      borderRadius: 5,\r\n      padding: 10,\r\n      marginBottom: 10,\r\n  }\r\n  if (message === '') {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div style = {style}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\n  const SuccessNotification = ({ message }) => {\r\n    return(\r\n      <Notification message = {message} color = 'green'/>\r\n    )\r\n  }\r\n\r\n  const ErrorNotification = ({ message }) => {\r\n    return(\r\n      <Notification message = {message} color = 'red'/>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <SuccessNotification message = {notificationMessage}/>\r\n      <ErrorNotification message = {errorMessage}/>\r\n      <h2>Phonebook</h2>\r\n      <Filter value = {search} onChange = {handleSearchChange} />\r\n      <h2>Add new person</h2>\r\n      <PersonForm addPerson = {addPerson} newName = {newName} handleNameChange = {handleNameChange} newNumber = {newNumber} handleNumberChange = {handleNumberChange} />\r\n      <h2>Numbers</h2>\r\n      <Information persons = {filteredPersons} handleDeleteClick = {handleDeleteClick}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/app'\n\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}